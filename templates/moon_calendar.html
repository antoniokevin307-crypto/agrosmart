{% extends "base.html" %}
{% block content %}
<div class="card shadow-lg p-4 mb-4" style="max-width:700px;margin:auto;background:linear-gradient(120deg,#f8fff8 0%,#e0ffe0 100%);border-radius:1.2rem;">
  <h2 class="mb-3" style="font-weight:700;color:#2d6a4f;letter-spacing:1px;">Calendario Lunar</h2>
  <form method="post">
    {% csrf_token %}
    <div class="mb-3">
      <label class="form-label" style="font-weight:600;">Fecha de consulta</label>
      {{ form.date }}
    </div>
    <button class="btn btn-cultivo" type="submit" style="min-width:140px;font-size:1.08rem;font-weight:500;border-radius:0.7rem;padding:0.55rem 1.1rem;box-shadow:0 2px 8px #6f42c133;background:linear-gradient(90deg,#e0ffe0 0%,#b2f7b2 100%);color:#2d6a4f;border:1px solid #b2f7b2;">Consultar</button>
  </form>
  {% if moon_phase_es %}
  <div class="mt-4">
    <h4>Estado actual de la luna:</h4>
    <div class="weather-card animate__animated animate__fadeIn" style="margin:auto;max-width:220px;">
          <div class="weather-icon" style="width:38px;height:38px;margin-bottom:0.5rem;display:flex;align-items:center;justify-content:center;">
            <span style="font-size:2rem;">{{ moon_icon }}</span>
          </div>
          <div class="weather-label">Fase lunar</div>
          <div class="weather-value" style="font-size:1.15rem;">{{ moon_phase_es }}</div>
          <div style="margin-top:1rem;">
            <img src="/static/img/moon_phases/{{ moon_phase_slug }}.svg" alt="{{ moon_phase_es }}" style="width:80px;height:80px;" onerror="this.style.display='none'">
          </div>
    </div>
  </div>
  {% endif %}
</div>
<style>
.weather-card {
  background: linear-gradient(90deg,#e0eafc 0%,#cfdef3 100%);
  border-radius: 1.2rem;
  box-shadow: 0 4px 24px #19875422;
  padding: 1.5rem 1rem 1rem 1rem;
  text-align: center;
  transition: transform 0.4s cubic-bezier(.4,0,.2,1), box-shadow 0.4s cubic-bezier(.4,0,.2,1);
  opacity: 1;
  transform: translateY(0) scale(1);
  margin-bottom: 0;
  min-width: 160px;
  max-width: 220px;
  flex: 1 1 180px;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.weather-card .weather-icon {
  width: 38px;
  height: 38px;
  margin-bottom: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
}
.weather-card .weather-label {
  font-weight: bold;
  color: #198754;
  font-size: 1.08rem;
  margin-bottom: 0.3rem;
}
.weather-card .weather-value {
  font-size: 1.35rem;
  color: #0d6efd;
  font-weight: bold;
}
</style>
{% endblock %}
